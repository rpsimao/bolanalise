// **************************************************************************
// Copyright 2007 - 2009 Tavs Dokkedahl
// Contact: http://www.jslab.dk/contact.php
//
// This file is part of the JSLab Standard Library (JSL) Program.
//
// JSL is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation; either version 3 of the License, or
// any later version.
//
// JSL is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program. If not, see <http://www.gnu.org/licenses/>.
// ***************************************************************************
// File created 2009-06-13 14:44:41

Date.nameOfMonths=['January','February','March','April','May','June','July','August','September','October','November','December'];Date.prototype.format=function(s,utc){s=s.split('');var l=s.length;var r='';var n=m=null;for(var i=0;i<l;i++){switch(s[i]){case 'd': n=utc?this.getUTCDate(): this.getDate();if(n*1<10)r+='0';r+=n;break;case 'D': r+=this.getNameOfDay(utc).substring(0,3);break;case 'j': r+=utc?this.getUTCDate(): this.getDate();break;case 'l': r+=this.getNameOfDay(utc);break;case 'N': r+=this.getISODay(utc);break;case 'S': r+=this.getDaySuffix(utc);break;case 'w': r+=utc?this.getUTCDay(): this.getDay();break;case 'z': n=0;m=utc?this.getUTCMonth(): this.getMonth();for(var i=0;i<m;i++)n+=Date.daysInMonth[i]if(this.isLeapYear())n++;n+=utc?this.getUTCDate(): this.getDate();n--;r+=n;break;case 'W': r+=this.getISOWeek(utc);break;case 'F': r+=this.getNameOfMonth(utc);break;case 'm': n=utc?this.getUTCMonth(): this.getMonth();n++;if(n<10)r+='0';r+=n;break;case 'M': r+=this.getNameOfMonth(utc).substring(0,3);break;case 'n': n=utc?this.getUTCMonth(): this.getMonth();r+=++n;break;case 't': r+=this.getDaysInMonth(utc);break;case 'L': if(this.isLeapYear(utc))r+='1';else r+='0';break;case 'Y': r+=utc?this.getUTCFullYear(): this.getFullYear();break;case 'y': n=utc?this.getUTCFullYear(): this.getFullYear();r+=(n+'').substring(2);break;case 'a': n=utc?this.getUTCHours(): this.getHours();r+=n<12?'am' : 'pm';break;case 'A': n=utc?this.getUTCHours(): this.getHours();r+=n<12?'AM' : 'PM';break;case 'g': n=utc?this.getUTCHours(): this.getHours();if(n>12)n-=12;r+=n;break;case 'G': r+=this.getHours();break;case 'h': n=utc?this.getUTCHours(): this.getHours();if(n>12)n-=12;if(n<10)r+='0';r+=n;break;case 'H': n=utc?this.getUTCHours(): this.getHours();if(n<10)r+='0';r+=n;break;case 'i': n=utc?this.getUTCMinutes(): this.getMinutes();if(n<10)r+='0';r+=n;break;case 's': n=utc?this.getUTCSeconds(): this.getSeconds();if(n<10)r+='0';r+=n;break;case 'u': r+=utc?this.getUTCMilliseconds(): this.getMilliseconds();break;case 'I': if(this.getMinutes()!=this.getUTCMinutes)r+='1';else r+='0';break;case 'O': n=this.getTimezoneOffset()/60;if(n>=0)r+='+';else r+='-';n=Math.abs(n);if(Math.abs(n)<10)r+='0';r+=n+'00';break;case 'P': n=this.getTimezoneOffset()/60;if(n>=0)r+='+';else r+='-';n=Math.abs(n);if(Math.abs(n)<10)r+='0';r+=n+':00';break;case 'Z': r+=this.getTimezoneOffset()*60;break;case 'c': r+=this.format('Y-m-d',utc)+'T'+this.format('H:i:sP',utc);break;case 'r': r+=this.format('D,j M Y H:i:s P',utc);break;case 'U': r+=this.getTime();break;default: r+=s[i];}}return r};Date.prototype.getDaySuffix=function(utc){var n=utc?this.getUTCDate(): this.getDate();if(n!=11&&(n+'').match(/1$/))return 'st';else if(n!=12&&(n+'').match(/2$/))return 'nd';else if(n!=13&&(n+'').match(/3$/))return 'rd';else return 'th';};Date.prototype.getISODay=function(utc){var d=utc?this.getUTCDay(): this.getDay();return d?d : 7;};Date.prototype.getISOWeek=function(utc){var y=utc?this.getUTCFullYear(): this.getFullYear();var m=utc?this.getUTCMonth()+1: this.getMonth()+1;var d=utc?this.getUTCDate(): this.getDate();if(m<3){var a=y-1;var b=(a/4|0)-(a/100|0)+(a/400|0);var c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);var s=b-c;var e=0;var f=d-1+31*(m-1);}else{var a=y;var b=(a/4|0)-(a/100|0)+(a/400|0);var c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);var s=b-c;var e=s+1;var f=d+((153*(m-3)+2)/5|0)+58+s;}var g=(a+b)%7;var d=(f+g-e)%7;var n=f+3-d;if(n<0)var w=53-((g-s)/5|0);else if(n>364+s)var w=1;else var w=(n/7|0)+1;return w;};Date.prototype.getNameOfDay=function(utc){var d=this.getISODay(utc)-1;return Date.nameOfDays[d];};Date.prototype.getNameOfMonth=function(utc){var m=utc?this.getUTCMonth(): this.getMonth();return Date.nameOfMonths[m];};Date.prototype._getTimezoneOffset=Date.prototype.getTimezoneOffset;Date.prototype.getTimezoneOffset=function(){return this._getTimezoneOffset()*-1;};Date.prototype.isLeapYear=function(utc){var y=utc?this.getUTCFullYear(): this.getFullYear();return!(y%4)&&(y%100)||!(y%400)?true : false;};Date.nameOfDays=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];